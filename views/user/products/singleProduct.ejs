<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description"
		content="Responsive Bootstrap4 Shop Template, Created by Imran Hossain from https://imransdesign.com/">
	<title>Single Product</title>

	<!-- * product zoom css -->
	<link rel="stylesheet" href="static/user/css/productZoom.css">
</head>

<body class="marginTopForBody">

	<!--PreLoader-->
	<div class="loader">
		<div class="loader-inner">
			<div class="circle"></div>
		</div>
	</div>
	<!--PreLoader Ends-->

	<!-- * alert -->
	<div class="position-fixed col-10 d-flex justify-content-center" style="z-index: 10;">
		<div class="alert alert-info fade show  w-auto d-none " role="alert" id="bsAlert">
		</div>
	</div>
	<!-- * alert end -->

	<!-- * breadcrumbs -->
	<div class="container">
		<h3>Home / All categories / <span class="orangeTextColor">
				<%= product.name %>
			</span></h3>
	</div>
	<!-- * end breadcrumbs -->


	<!-- * product details -->
	<div class="container-fluid d-md-flex justify-content-center flex-sm-row flex-cloumn  singleProductContainer">
		<!-- * image -->
		<section class="d-flex col-xl-4 col-lg-5 py-5 productImageSection ">
			<div class="d-block col-3 ">
				<% for(const image of product.image) {%>
					<div class="cardStokeSmallImage p-2 my-2 shadow">
						<img src="<%= image.path %>" alt="<%= image.originalName  %>">
					</div>
					<% } %>
			</div>

			<!-- * zoom content start -->
			<div class="productMainImageContainer shadow py-2 px-1">
				<div class="productMainImage shadow-sm  w-100">
					<img id="productImage" src="<%= product.image[0].path %>" alt="<%= product.image[0].originalName %>">
					<div id="magnifier"></div>
				</div>
				<div class="d-flex justify-content-center">
					<button class="btn btn-outline-primary rounded-pill w-100 px-3 addToCartBtn" data-id="<%= product._id %>"
						data-price="<%= product.finalPrice %>"> Add to Cart</button>
				</div>
			</div>
			<!-- * zoom content end -->
		</section>
		<!-- * end image -->

		<!-- * details -->
		<section class="d-flex col-lg-7 col-md-6 col-12 ml-md-4 mt-xxl-1 mt-4 justify-content-center align-items-center ">
			<ul class="productDetailsList col-sm-10 col-12">
				<li>
					<h6>
						<%= product.productInfo?.brand %>
					</h6>
				</li>
				<li>
					<h4>
						<%= product.name %>
							</h3>
				</li>
				<li>
					<div class="d-flex justify-content-between py-2 align-items-center">
						<section class="d-flex align-items-center">
							<div class="d-flex align-items-center pb-3 pr-5 ">
								<% for(let i=0;i< 5 ;i++) {%>
									<% if(i<product.rating) {%>
										<i class="fa-solid fa-star fa-lg text-warning"></i>
										<% } else { %>
											<i class="fa-regular fa-star fa-lg text-warning"></i>
											<% } %>
												<% } %>
							</div>
							<div>
								<span class="h5 text-secondary">
									<%= product.peopleRated %>
								</span>
							</div>
						</section>
						<section>
							<a class="addToWishlistBtn ml-3" data-id="<%= product._id %>">
								<i
									class="fa-solid fa-heart fa-xl <%= product.isWishlisted ? 'wishlistBtnIcon' : 'text-secondary'   %>"></i>
							</a>
							<a class="text-secondary">
								<i class="fa-solid fa-share-nodes fa-xl"></i>
							</a>
						</section>
					</div>
				</li>
				<li>
					<div class="flex">
						<h5 class="priceTextColor">
							₹ <%= product.finalPrice %>
						</h5>
						<% if(product.offer && product?.offer?.discountType) {%>
							<div class="d-flex">
								<h5 class=" mr-2 text-secondary textLineTrough mr-3">₹<%= product.price %>
								</h5>
								<% if(product.offer.discountType==='percentage' ) { %>
									<h5 class="text-success">
										<%= product?.offer.discountValue %>% OFF
									</h5>
									<% }else { %>
										<h5 class="text-success">₹<%= product?.offer.discountValue %> OFF</h5>
										<% } %>
							</div>
							<% } %>
					</div>
				</li>

				<li>
					<div class="w-100 bg-secondary divider"></div>
				</li>

				<li>
					<article class="">
						<h5>Offers (3)</h5>
						<div>
							<h6>ADDITIONAL OFFERS</h6>
							<p>Rs 100 Cashback on the first purchase of Rs 600 Or Above</p>
							<small>6 Offer/s Available</small>
						</div>
						<div>
							<h6>ADDITIONAL OFFERS</h6>
							<p>Rs 100 Cashback on the first purchase of Rs 600 Or Above</p>
							<small>6 Offer/s Available</small>
						</div>
						<button class="btn btn-outline-secondary rounded-pill">
							<span>View all</span>
						</button>
					</article>
				</li>
				<li>
					<div class="w-100 bg-secondary divider"></div>
				</li>

				<li>
					<h5>Deliver to</h5>
					<div>
						<p>pin <span>address</span></p>
						<p class="">
							<% if(product.stock>0) {%>
								<span class="text-success">In stock</span>
								<% }else { %>
									<span class="text-danger">Out of stock</span>
									<% } %>
										Delivery Between 21st Jun to 23rd Jun
						</p>
					</div>
				</li>
				<li>
					<div class="w-100 bg-secondary divider"></div>
				</li>

				<li>
					<h5 class="">Sold by</h5>
					<p>
						<%= product.productInfo?.soldBy %>
					</p>
				</li>

				<li>
					<div class="w-100 bg-secondary divider"></div>
				</li>

				<li>
					<h5>Features & Details</h5>
					<p class="text-secondary">
						<%= product.productInfo?.featuresAndDetails %>
					</p>
				</li>
				<li>
					<div class="w-100 bg-secondary divider"></div>
				</li>
				<li>
					<h5>Description</h5>
					<p class="text-secondary">
						<%= product.productInfo?.description %>
					</p>
				</li>
				<li>
					<div class="w-100 bg-secondary divider"></div>
				</li>

				<li>
					<h5>Product Information</h5>
					<h6>GENERAL INFORMATION</h6>
					<div class="d-flex justify-content-between">
						<span>Brand</span>
						<span>
							<%= product.productInfo?.brand %>
						</span>
					</div>
					<div class="d-flex justify-content-between">
						<span>Manufacturer</span>
						<span>
							<%= product.productInfo?.soldBy %>
						</span>
					</div>
					<div class="d-flex justify-content-between">
						<span>Address</span>
						<span>
							<%= product.productInfo?.address %>
						</span>
					</div>
					<button class="btn btn-outline-secondary rounded-pill">
						<span>Add</span>
					</button>
				</li>
				<li>
					<div class="w-100 bg-secondary divider"></div>
				</li>

				<li>
					<div class="d-flex">
						<p>Article ID: 491085607</p>
						<i class="fa-solid fa-copy"></i>
					</div>
				</li>
			</ul>
		</section>
		<!-- *end  details -->
	</div>
	<!-- * product details -->

	<!-- * suggestions -->
	<div class="container">
		<section class="mt-5 position-relative">
			<h3><span class="orange-text">Based on</span> browsing history</h3>

			<div class="d-flex justify-content-between align-items-center my-3 suggestionsBtnContainer">
				<button id="scroll-left" class="btn btn-secondary rounded-pill scroll-button left">
					<i class="fas fa-chevron-left"></i>
				</button>
				<button id="scroll-right" class="btn btn-secondary rounded-pill scroll-button right">
					<i class="fas fa-chevron-right"></i>
				</button>
			</div>

			<!-- * suggestions -->
			<div class="d-flex justify-content-between scrollContainer suggestionsContainer">
				<% for(let item of suggestions){ %>
					<!-- * mycard -->
					<div class="position-relative col-lg-2 col-md-3 m-1 mx-3 mb-3 text-center p-2 cardStoke ">
						<div class="position-absolute top-0 start-0">
							<a class="addToWishlistBtn" data-id="<%= item._id %>">
								<i class="fa-solid fa-heart fa-xl <%= item.isWishlisted  ? 'wishlistBtnIcon' : 'text-secondary' %>"></i>
							</a>
						</div>

						<div class="d-flex flex-column align-content-center ">
							<div class="d-flex justify-content-center ">
								<a class="cardImage" href="/product?productId=<%=item._id %>">
									<img src="<%= item.image[0]?.path  %>" alt="<%= item.image[0].originalName  %>">
								</a>
							</div>
							<h6>
								<%= item.name %>
							</h6>
							<h5 class="priceTextColor">₹<%= item.finalPrice%>
							</h5>
							<% if(item?.offer?.discountType) {%>
								<div class="d-flex justify-content-center ">
									<p class=" text-secondary px-3 textLineTrough">
										₹<%= item.price %>
									</p>
									<% if(item.offer.discountType==='percentage' ) {%>
										<p class="text-success px-3">
											<%= item.offer.discountValue %>% OFF
										</p>
										<% }else{ %>
											<p class="text-success px-3">₹<%= item.offer.discountValue %> OFF</p>
											<% } %>
								</div>
								<% } else { %>
									<div style='height:42px'></div>
									<% } %>
										<div class="d-flex align-items-baseline">
											<div class="d-flex pb-3 px-3">
												<% for(let i=0;i< 5 ;i++) {%>
													<% if(i<item.rating) {%>
														<i class="fa-solid fa-star fa-lg text-warning"></i>
														<% } else { %>
															<i class="fa-regular fa-star fa-lg text-warning"></i>
															<% } %>
																<% } %>
											</div>
											<span class="text-secondary">
												<%= item.peopleRated %>
											</span>
										</div>
										<button class="btn btn-outline-info rounded-pill addToCartBtn" data-id="<%= item._id %>"
											data-price="<%= item.finalPrice %>">
											<span>Add to Cart</span>
										</button>
						</div>
					</div>
					<!-- * end card -->
					<% } %>

			</div>
		</section>
	</div>
	<!-- * suggestions end -->



	<div class="container-fluid d-md-flex justify-content-center flex-sm-row flex-cloumn my-5 singleProductContainer">
		<!-- * rating -->
		<section class="col-xl-4 col-lg-4 col-md-3 col-12 py-4 mx-md-3 mx-0  rounded-3 shadow ratingSection">
			<h4>Ratings & Reviews</h4>
			<div>
				<h5>
					<%= product.rating %>
				</h5>
				<div class="d-flex pb-3 pr-5 ">
					<% for(let i=0;i< 5 ;i++) {%>
						<% if(i<product.rating) {%>
							<i class="fa-solid fa-star fa-lg text-warning"></i>
							<% } else { %>
								<i class="fa-regular fa-star fa-lg text-warning"></i>
								<% } %>
									<% } %>
				</div>
				<div class="d-flex">
					<h5 class="pr-2"> People rated</h5>
					<h5><%= product.peopleRated %></h5>
				</div>
			</div>
		</section>
		<!-- * end rating -->

		<!-- * reviews -->
		<section class="d-flex col-xl-7 col-lg-8 col-md-9 col-12 mt-md-0 mt-3">
			<ul class="reviewSection col-sm-10 col-12">
				<li>
					<h4>Reviews from customers</h4>
				</li>
				<% if(product?.reviews?.[0]?.rating) { %>
				<% for(const review of product?.reviews){ %>
					<li class="my-3 ">
						<section class="card shadow reviewCard">
							<div class="card-body">
								<div class="d-flex justify-content-between">
									<div class="d-flex pb-3 pr-5 ">
										<% for(let i=0;i< 5 ;i++) {%>
											<% if(i < review.rating) {%>
												<i class="fa-solid fa-star fa-lg text-warning"></i>
												<% } else { %>
													<i class="fa-regular fa-star fa-lg text-warning"></i>
												<% } %>
											<% } %>
									</div>
									<span class="reviewCreatedAt"> <%= review.createdAt %> </span>
								</div>
								<h6><%= review.review %></h6>
								<div class="d-flex ">
									<% if (review?.userDetails?.image) { %>
										<div class="reviewImageContainer">
											<img class="reviewImage" src="<%= review?.userDetails?.image %>"  alt="">
										</div>
									<% } else { %>
										<div class="reviewImageContainer">
											<img class="reviewImage" src="/static/user/assets/img/avatars/1.png"  alt="">
										</div>
									<% } %>
									<span class="px-2">
										<%= review?.userDetails?.name %>
									</span>

								</div>
							</div>
						</section>
					</li>
				<% } %>
				<% } else { %>
					<li>
						<h5 class="text-center text-secondary py-3">No reviews yet</h5>
					</li>
				<% } %>
			</ul>

		</section>
		<!-- * end reviews -->
	</div>


	<% scriptBlock=` 
		<script src="https://cdn.jsdelivr.net/npm/moment@2.30.1/moment.min.js"></script>
		<script src="static/user/scripts/singleProduct.js"></script>
		<script src="static/user/scripts/user.js"></script>
		<script src="/static/user/scripts/cart.js"></script>
		`
		%>

</body>

</html>